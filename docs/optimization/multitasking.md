# 後端工程師為何需要理解多工?

因為後端工程師所建構的程式、都是為了服務大量的使用者而打造。
理解電腦多工的運作原理、你才能有效壓榨伺服器的資源、用更少的資源、提供更多服務能量。

# 什麼是多工 (Multitasking)

Multitasking 指的是、可以在同時間處理很多事情。

但是在電腦的領域裡、多工可以是真的多工、或是看起來多工。那麼它們的區別在什麼地方呢?

這裡有一個最基礎的理論、一顆 CPU、不管怎麼樣、它同時間只能處理一件事。
所以要達成真的多工、你的電腦裡必需要有一顆以上的 CPU (或是 CPU 核心)
這樣一來、你可以將不同的工作分配給不同的 CPU 去同時執行。

那麼看起來多工又是怎麼回事呢? 假設你只有一顆 CPU、理論上你沒有辦法同時處理很多件事情。
但由於 CPU 的運作速度非常的快、如果我們讓 CPU 在各項要處理的事務之間快速的來回的切換執行、由於切換的速度很快、對於人類看起來、它就像是在同時處理很多件事情。

這個就叫做看起來多工。

# 先佔式多工 vs 協同式多工

這兩個名詞主要針對的是上面提到的「在要處理的事務之間快速切換的方式」。

先佔式多工、事務之間的切換有一個統一的總管負責。由它來分配每件事務可以佔用的時間。時間一到、它就會強制的把執行權限移交給下一個事務。

而協同式多工、則是事務的處理者自行決定什麼時候移交執行權限給下一個事務。

而它們的好處與壞處都是相對的。

先佔式多工、比較不會出現有特定事務霸佔執行權限、導致其它事務的進度無法推進的問題。但反過來看、協同式多工由於是各事務自行決定切換時機、所以可以選擇最佳的時機將事務移交出去。而不會因為一直被迫移交執行權限而導致來回切換成本過高。
